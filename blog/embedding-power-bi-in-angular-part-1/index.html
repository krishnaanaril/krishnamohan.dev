<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Scully 1.1.0">
  <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118442837-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-118442837-2');
  </script>
  <meta charset="utf-8">
  <title>Embedding Power BI in Angular — Part 1</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <!-- <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->
  <link rel="manifest" href="manifest.json">  
  <link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png">
  <meta name="theme-color" content="#1976d2">
<link rel="stylesheet" href="styles.c85254d7f2681ed00865.css"><style></style><script charset="utf-8" src="common-es2015.3135f207d78e5ed7d6fb.js"></script><script charset="utf-8" src="6-es2015.27fa8c2d2015b2825e5d.js"></script><style>ol[_ngcontent-spp-c9]{list-style-type:decimal}ul[_ngcontent-spp-c9]{list-style-type:disc;padding-left:2.5rem}p[_ngcontent-spp-c9]{padding-top:1.25rem;padding-bottom:1.25rem}h2[_ngcontent-spp-c9]{font-size:1.875rem;line-height:2.25rem;margin-top:1.25rem;margin-bottom:1.25rem}h3[_ngcontent-spp-c9]{font-size:1.5rem;line-height:2rem;margin-top:.75rem;margin-bottom:.75rem}pre[_ngcontent-spp-c9]{font-size:1rem;line-height:1.5rem;margin-bottom:1.25rem;padding:1.25rem}a[_ngcontent-spp-c9]{--tw-border-opacity:1;border-color:rgba(37,99,235,var(--tw-border-opacity));border-bottom-width:2px}</style><meta name="title" content="Embedding Power BI in Angular — Part 1"><meta name="description" content="Power BI is a powerful tool which helps us to create quick and interactive insights from wide range of data sources. Here we’ll be discussing about Power BI service which is a SaaS, and how to embed Power BI Dashboards, Reports and Tiles in web applications."><meta name="og:type" content="article"><meta name="og:url" content="/blog/embedding-power-bi-in-angular-part-1"><meta name="og:title" content="Embedding Power BI in Angular — Part 1"><meta name="og:description" content="Power BI is a powerful tool which helps us to create quick and interactive insights from wide range of data sources. Here we’ll be discussing about Power BI service which is a SaaS, and how to embed Power BI Dashboards, Reports and Tiles in web applications."><meta name="og:image" content="assets/banners/01"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="/blog/embedding-power-bi-in-angular-part-1"><meta name="twitter:title" content="Embedding Power BI in Angular — Part 1"><meta name="twitter:description" content="Power BI is a powerful tool which helps us to create quick and interactive insights from wide range of data sources. Here we’ll be discussing about Power BI service which is a SaaS, and how to embed Power BI Dashboards, Reports and Tiles in web applications."><meta name="twitter:image" content="assets/banners/01"><meta name="twitter:site" content="@krishnaanaril"><meta name="twitter:creator" content="@krishnaanaril"><meta name="keywords" content="powerbi, angular, dotnet"><meta name="og:article:published_time" content="2018-10-15T00:00:00.000Z"><meta name="og:article:modified_time" content="2018-10-15T00:00:00.000Z"><meta name="og:article:author" content="Krishna Mohan A M"><meta name="og:article:section" content="Tech"><meta name="og:article:tag" content="powerbi, angular, dotnet"><style>
      :host {
        display: none;
      }
      scully-content {
        display: none;
      }
    </style><script>window['ScullyIO']='generated';</script></head>

<body scully-version="1.1.0">
  <app-root _nghost-spp-c7="" ng-version="11.2.2"><div _ngcontent-spp-c7="" class="bg-gray-200 text-gray-800 dark:bg-black dark:text-gray-50"><div _ngcontent-spp-c7="" class="container mx-auto bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><section _ngcontent-spp-c7="" class="hidden lg:flex flex-row justify-center"><nav _ngcontent-spp-c7=""><ul _ngcontent-spp-c7="" class="lg:text-xl lg:flex lg:flex-row"><li _ngcontent-spp-c7="" routerlinkactive="border-b-2 border-gray-700 dark:border-gray-300" class="p-3 cursor-pointer" tabindex="0">Home</li><li _ngcontent-spp-c7="" routerlinkactive="border-b-2 border-gray-700 dark:border-gray-300" class="p-3 cursor-pointer border-b-2 border-gray-700 dark:border-gray-300" tabindex="0">Blog</li><li _ngcontent-spp-c7="" routerlinkactive="border-b-2 border-gray-700 dark:border-gray-300" class="p-3 cursor-pointer" tabindex="0">Projects</li><li _ngcontent-spp-c7="" routerlinkactive="border-b-2 border-gray-700 dark:border-gray-300" class="p-3 cursor-pointer" tabindex="0">About</li><!----></ul></nav></section><div _ngcontent-spp-c7="" class="absolute lg:hidden mr-4 p-4 right-0"><button _ngcontent-spp-c7="" aria-label="view menu items" class="p-2"><svg _ngcontent-spp-c7="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="24px" height="24px" class="fill-current"><path _ngcontent-spp-c7="" d="M0 0h24v24H0z" fill="none"></path><path _ngcontent-spp-c7="" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button></div></div><!----><router-outlet _ngcontent-spp-c7=""></router-outlet><app-blog-post _nghost-spp-c9=""><div _ngcontent-spp-c9="" class="container mx-auto min-h-screen bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50">
    <div _ngcontent-spp-c9="">
        <div _ngcontent-spp-c9="" aria-label="Blog tags/keywords" class="pt-8 flex flex-row justify-center">
            <div _ngcontent-spp-c9="" class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">powerbi</div><div _ngcontent-spp-c9="" class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">angular</div><div _ngcontent-spp-c9="" class="bg-gray-300 dark:bg-gray-700 border border-gray-400 ml-2 mr-2 pb-2 pl-4 pr-4 pt-2 text-sm align-baseline rounded-full">dotnet</div><!---->
        </div>
        <div _ngcontent-spp-c9="" class="max-w-screen-lg mx-auto">
            <h1 _ngcontent-spp-c9="" class="text-5xl pt-5 pb-5 text-center">Embedding Power BI in Angular — Part 1</h1>
        </div>
        <div _ngcontent-spp-c9="" class="flex flex-row justify-center m-5 max-w-screen-sm mx-auto">
            <time _ngcontent-spp-c9="" class="text-center text-xl">Oct 15, 2018</time>
        </div>
    </div>
    <hr _ngcontent-spp-c9="" class="mx-auto border-gray-800 w-1/4">
    <div _ngcontent-spp-c9="" class="max-w-screen-md mx-auto p-6 md:p-12 leading-8">
        <!--scullyContent-begin--><p _ngcontent-spp-c9="">Power BI is a powerful tool which helps us to create quick and interactive insights from wide range of data sources. Here we’ll be discussing about <strong _ngcontent-spp-c9="">Power BI service</strong> which is a <strong _ngcontent-spp-c9="">SaaS</strong>, and how to embed Power BI Dashboards, Reports and Tiles in web applications. If you are new to Power BI, you can start <a href="https://docs.microsoft.com/en-us/power-bi/power-bi-overview" _ngcontent-spp-c9="">here</a>.</p>
<p _ngcontent-spp-c9="">Power BI can be embedded in an application by two ways:</p>
<ol _ngcontent-spp-c9="">
<li _ngcontent-spp-c9=""><p _ngcontent-spp-c9=""><strong _ngcontent-spp-c9="">Embedding for customers</strong> — This is for embedding dashboards and reports to user who don’t have Power BI account. Power BI API’s are invoked based on the application’s master account and the reports/dashboards are made available to the users of the application.</p>
</li>
<li _ngcontent-spp-c9=""><p _ngcontent-spp-c9=""><strong _ngcontent-spp-c9="">Embedding for your organization</strong> — This is for embedding dashboards/reports for the users in your organization, who have Power BI accounts.</p>
<blockquote _ngcontent-spp-c9="">
<p _ngcontent-spp-c9=""> <strong _ngcontent-spp-c9="">Update on 30th January 2019:</strong> There is a new option that enables business users who do not have any coding skills to easily and securely embed reports in internal web portals. Users viewing the embedded report need either a Power BI Pro license or the content needs to be in a workspace that’s in a <a href="https://docs.microsoft.com/en-us/power-bi/service-admin-premium-purchase" _ngcontent-spp-c9="">Power BI Premium capacity (EM or P SKU)</a>. More information is available <a href="https://powerbi.microsoft.com/en-us/blog/easily-embed-secure-power-bi-reports-in-your-internal-portals-or-websites" _ngcontent-spp-c9="">here</a>.</p>
</blockquote>
</li>
</ol>
<p _ngcontent-spp-c9="">Microsoft provides sample .net applications for both ways. The source code is available <a href="https://github.com/Microsoft/PowerBI-Developer-Samples" _ngcontent-spp-c9="">here</a>, well and good. But how to embed reports/dashboards in popular JavaScript frameworks?</p>
<p _ngcontent-spp-c9="">There weren’t much tutorials available on-line, and I was bit confused with the distinction between the above two approaches. But I was not alone in this pursuit, <a href="https://medium.com/@ramandeep.singh.1983/power-bi-overview-and-angular-embedding-how-to-f73390f4a399" _ngcontent-spp-c9="">someone</a> have already figured out the “Embedding for customers” and it was really helpful. I wasn’t satisfied with that and after spending a couple of days in Power BI forums and GitHub repositories, I’ve finally figured out how to do it both.</p>
<p _ngcontent-spp-c9="">This is the first part of the two-part article series. You can find the second one <a href="https://krishnamohan.dev/blog/embedding-powerbi-in-angular-part-2" _ngcontent-spp-c9="">here</a>.</p>
<h2 id="embedding-for-customers" _ngcontent-spp-c9="">Embedding for Customers</h2>
<p _ngcontent-spp-c9="">Creating dashboards/reports using Power BI are out of scope of this article, you can learn more about it <a href="https://docs.microsoft.com/en-us/power-bi/service-get-started" _ngcontent-spp-c9="">here</a>. I’ve skipped a lot a details which have better documentation elsewhere.</p>
<h3 id="contents" _ngcontent-spp-c9="">Contents</h3>
<ul _ngcontent-spp-c9="">
<li _ngcontent-spp-c9="">Prerequisite</li>
<li _ngcontent-spp-c9="">Overview</li>
<li _ngcontent-spp-c9="">Set up your embedded analytics development environment</li>
<li _ngcontent-spp-c9="">Set up your Power BI environment</li>
<li _ngcontent-spp-c9="">Create a Web API</li>
<li _ngcontent-spp-c9="">Create Angular client</li>
<li _ngcontent-spp-c9="">Conclusion</li>
</ul>
<h3 id="prerequisites" _ngcontent-spp-c9="">Prerequisites</h3>
<ul _ngcontent-spp-c9="">
<li _ngcontent-spp-c9=""><a href="https://powerbi.microsoft.com/en-us/pricing/" _ngcontent-spp-c9="">Power BI pro account</a></li>
<li _ngcontent-spp-c9=""><a href="https://azure.microsoft.com/en-us/free/" _ngcontent-spp-c9="">Microsoft Azure Subscription</a></li>
<li _ngcontent-spp-c9=""><a href="https://docs.microsoft.com/en-us/power-bi/developer/create-an-azure-active-directory-tenant" _ngcontent-spp-c9="">Azure Active Directory Tenant</a> Setup. If it is already done for your organization, you can find it <a href="https://www.whatismytenantid.com/" _ngcontent-spp-c9="">here</a>.</li>
<li _ngcontent-spp-c9="">Visual Studio (2013 or later)</li>
<li _ngcontent-spp-c9="">Visual Studio Code</li>
<li _ngcontent-spp-c9="">npm, node, angular-cli</li>
</ul>
<h3 id="overview" _ngcontent-spp-c9="">Overview</h3>
<p _ngcontent-spp-c9="">A high level diagram showing how this works is shown below.</p>
<p _ngcontent-spp-c9=""><img src="assets/images/01_01.png" alt="Embedding for customers" _ngcontent-spp-c9="">
<em _ngcontent-spp-c9="">Embedding for customers</em></p>
<p _ngcontent-spp-c9="">The work flow is as follows.</p>
<ol _ngcontent-spp-c9="">
<li _ngcontent-spp-c9="">When user browse UI, it invokes API for embed token.</li>
<li _ngcontent-spp-c9="">API authenticates application using master account credentials and request for tokens.</li>
<li _ngcontent-spp-c9="">Azure AD returns token on successful validation, else reject the request.</li>
<li _ngcontent-spp-c9="">Embed token is returned to UI from API.</li>
<li _ngcontent-spp-c9="">UI calls Power BI API to get the report specific data with the token.</li>
<li _ngcontent-spp-c9="">Power BI API returns report data, and UI displays it in the web page.</li>
<li _ngcontent-spp-c9="">(Optional) User authorization via custom roles stored in the SQL server (or by any other means).</li>
</ol>
<h3 id="set-up-your-embedded-analytics-development-environment" _ngcontent-spp-c9="">Set up your embedded analytics development environment</h3>
<p _ngcontent-spp-c9="">Refer <a href="https://docs.microsoft.com/en-us/power-bi/developer/embed-sample-for-customers#set-up-your-embedded-analytics-development-environment" _ngcontent-spp-c9="">this</a> for more details.</p>
<blockquote _ngcontent-spp-c9="">
<p _ngcontent-spp-c9=""> Since we are using Web API, redirect URL don’t have much significance.</p>
</blockquote>
<h3 id="set-up-your-power-bi-environment" _ngcontent-spp-c9="">Set up your Power BI environment</h3>
<p _ngcontent-spp-c9="">Refer <a href="https://docs.microsoft.com/en-us/power-bi/developer/embed-sample-for-customers#set-up-your-power-bi-environment" _ngcontent-spp-c9="">this</a> for more details.</p>
<h3 id="create-a-web-api" _ngcontent-spp-c9="">Create a Web API</h3>
<p _ngcontent-spp-c9="">If you are new to Web API’s, you can start <a href="https://docs.microsoft.com/en-us/aspnet/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api" _ngcontent-spp-c9="">here</a>. In the Web.config file we need to add few key-value pairs. Here you need to provide your master account’s username and password.</p>
<p _ngcontent-spp-c9=""><img src="assets/images/01_02.png" alt="" _ngcontent-spp-c9=""><em _ngcontent-spp-c9="">Gist: <a href="https://gist.github.com/krishnaanaril/fdec1fe979dd353cd04bb86474e387e3" _ngcontent-spp-c9="">https://gist.github.com/krishnaanaril/fdec1fe979dd353cd04bb86474e387e3</a></em></p>
<p _ngcontent-spp-c9="">You’ll get ‘applicationId’, ‘workspaceId’ and ‘reportId’ during Power BI setup. Now we need to define the token objects to be returned from the methods.</p>
<p _ngcontent-spp-c9=""><img src="assets/images/01_03.png" alt="" _ngcontent-spp-c9=""><em _ngcontent-spp-c9="">Token object for Dashboard/Reports. Gist: <a href="https://gist.github.com/krishnaanaril/5e56889f072a2606c1da0646766501dc" _ngcontent-spp-c9="">https://gist.github.com/krishnaanaril/5e56889f072a2606c1da0646766501dc</a></em></p>
<p _ngcontent-spp-c9=""><img src="assets/images/01_04.png" alt="" _ngcontent-spp-c9=""><em _ngcontent-spp-c9="">Token object for Tiles. Gist: <a href="https://gist.github.com/krishnaanaril/8d4960b06aeefa218886c959308974f6" _ngcontent-spp-c9="">https://gist.github.com/krishnaanaril/8d4960b06aeefa218886c959308974f6</a></em></p>
<p _ngcontent-spp-c9="">We need to add Microsoft Power BI client <a href="https://www.nuget.org/packages/Microsoft.PowerBI.Api/" _ngcontent-spp-c9="">library</a> as we are invoking Power BI API’s from the server side code.</p>
<p _ngcontent-spp-c9="">As API methods, I’ve created three methods for Reports, Dashboards and Tiles respectively.</p>
<ol _ngcontent-spp-c9="">
<li _ngcontent-spp-c9=""><p _ngcontent-spp-c9=""><strong _ngcontent-spp-c9="">GetReportEmbedToken</strong>— This method accepts two optional parameters, username and roles, which is used for enabling row-level security (RLS). You can find more info about RLS <a href="https://docs.microsoft.com/en-us/power-bi/service-admin-rls" _ngcontent-spp-c9="">here</a>. In the method, we are returning the embed token for the first report available in the workspace.</p>
</li>
<li _ngcontent-spp-c9=""><p _ngcontent-spp-c9=""><strong _ngcontent-spp-c9="">GetDashboardEmbedToken</strong>— This method returns the embed token for the first dashboard in the workspace.</p>
</li>
<li _ngcontent-spp-c9=""><p _ngcontent-spp-c9=""><strong _ngcontent-spp-c9="">GetTileEmbedToken</strong>— This method returns the embed token for the first tile in the first dashboard which is available in the workspace.</p>
</li>
</ol>
<p _ngcontent-spp-c9=""><img src="assets/images/01_05.png" alt="" _ngcontent-spp-c9=""><em _ngcontent-spp-c9="">API method for getting embed token. Gist: <a href="https://gist.github.com/krishnaanaril/b093ab817d8fc29e4096346e034ccf3f" _ngcontent-spp-c9="">https://gist.github.com/krishnaanaril/b093ab817d8fc29e4096346e034ccf3f</a></em></p>
<p _ngcontent-spp-c9="">You can extend this methods to return tokens for custom reports, dashboards and tiles.</p>
<h3 id="create-angular-client" _ngcontent-spp-c9="">Create Angular client</h3>
<p _ngcontent-spp-c9="">Here we need to create a service to call the API we created above. For that, let’s create a service and add the following method.</p>
<p _ngcontent-spp-c9=""><img src="assets/images/01_06.png" alt="" _ngcontent-spp-c9=""><em _ngcontent-spp-c9="">Gist: <a href="https://gist.github.com/krishnaanaril/2387fa2a7fb2746cf1b0d93c149f03a9" _ngcontent-spp-c9="">https://gist.github.com/krishnaanaril/2387fa2a7fb2746cf1b0d93c149f03a9</a></em></p>
<p _ngcontent-spp-c9="">In the HTML page, create a ‘div’ with id ‘embedReport’. We’ll be showing report in this div. Embedding in div is done using Power BI JavaScript <a href="https://github.com/Microsoft/PowerBI-JavaScript" _ngcontent-spp-c9="">library</a>. You can add it to your angular application by running the following command.</p>
<pre _ngcontent-spp-c9=""><code class="language-bash" _ngcontent-spp-c9="">npm install --save powerbi-client
</code></pre>
<p _ngcontent-spp-c9="">Next, we need to create a method in component class to embed the reports as follows.</p>
<p _ngcontent-spp-c9=""><img src="assets/images/01_07.png" alt="" _ngcontent-spp-c9=""><em _ngcontent-spp-c9="">Gist: <a href="https://gist.github.com/krishnaanaril/412001afccf2f74d1c840e1f7fb4b7fe" _ngcontent-spp-c9="">https://gist.github.com/krishnaanaril/412001afccf2f74d1c840e1f7fb4b7fe</a></em></p>
<p _ngcontent-spp-c9="">For embedding reports for customers, type should be ‘reports’ and token type should be ‘Embed’. Here you can see the code for ‘tokenExpirationListener’. This is added as the generated tokens are valid only for an hour and it expires after that. So we need to generate another token by that time and update it. More info can be found <a href="https://github.com/Microsoft/PowerBI-JavaScript/wiki/Refresh-token-using-JavaScript-SDK-example" _ngcontent-spp-c9="">here</a>.</p>
<h3 id="conclusion" _ngcontent-spp-c9="">Conclusion</h3>
<p _ngcontent-spp-c9="">Now you’re done with your Angular app and its corresponding Web API, run it and verify the reports.</p>
<!--scullyContent-end--><scully-content _ngcontent-spp-c9=""></scully-content>
    <script>try {window['scullyContent'] = {cssId:"_ngcontent-spp-c9",html:document.body.innerHTML.split('<!--scullyContent-begin-->')[1].split('<!--scullyContent-end-->')[0]};} catch(e) {console.error('scully could not parse content');}</script></div>
    <hr _ngcontent-spp-c9="" class="border-gray-800">    
</div><!----></app-blog-post><!----><footer _ngcontent-spp-c7="" class="container mx-auto flex flex-col bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-50"><div _ngcontent-spp-c7="" class="mt-10"><ul _ngcontent-spp-c7="" class="flex flex-row justify-between max-w-sm mx-auto pl-4 pr-4"><li _ngcontent-spp-c7="" class="hover:text-gray-600 dark:hover:text-gray-100"><a _ngcontent-spp-c7="" href="https://twitter.com/KrishnaAnaril">Twitter</a></li><li _ngcontent-spp-c7=""><a _ngcontent-spp-c7="" href="https://krishnamohan.dev/sitemap-blog.xml">Sitemap</a></li><li _ngcontent-spp-c7=""><a _ngcontent-spp-c7="" href="https://krishnamohan.dev/feed.xml">RSS</a></li><li _ngcontent-spp-c7=""><a _ngcontent-spp-c7="" href="mailto:krishnamohan.a.m@gmail.com">Contact</a></li></ul></div><div _ngcontent-spp-c7="" class="mx-auto p-5 text-sm"><p _ngcontent-spp-c7="">© 2021-present <a _ngcontent-spp-c7="" href="https://krishnamohan.dev/" class="font-bold">Krishna Mohan A M</a>. All Rights Reserved.</p></div></footer></div></app-root>
  <noscript>Please enable JavaScript to continue using this application.</noscript>
<script id="ScullyIO-transfer-state"></script><script src="runtime-es2015.eea81c6e822175885f57.js" type="module"></script><script src="runtime-es5.eea81c6e822175885f57.js" nomodule="" defer=""></script><script src="polyfills-es5.29147128fc6f0f3fd286.js" nomodule="" defer=""></script><script src="polyfills-es2015.2045db6d95f407e1e8c7.js" type="module"></script><script src="main-es2015.01946dabfc024e5accee.js" type="module"></script><script src="main-es5.01946dabfc024e5accee.js" nomodule="" defer=""></script>

</body></html>