<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Scully 0.0.86">
  <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118442837-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-118442837-2');
  </script>
  <meta charset="utf-8">
  <title>Embedding Power BI in Angular — Part 2</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <!-- <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> -->
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
  <link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png">
  <meta name="theme-color" content="#1976d2">
<link rel="stylesheet" href="styles.34c42489fca4adbf5f28.css"><style></style><style>.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}
</style><script charset="utf-8" src="common-es2015.b255d365ac89cd3baf66.js"></script><script charset="utf-8" src="6-es2015.9a11de5fb0ccebea834a.js"></script><style>[_ngcontent-lbd-c31]::slotted(h1){color:#330625;background-color:#f8d3ec;padding:5px;border-radius:5px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.blog-post[_ngcontent-lbd-c31], .post-footer[_ngcontent-lbd-c31]{margin:auto;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;max-width:768px;font-size:18px;line-height:1.5;font-family:Raleway,sans-serif}@media (max-width:768px){.blog-post[_ngcontent-lbd-c31], .post-footer[_ngcontent-lbd-c31]{margin:0 10px}}img[_ngcontent-lbd-c31]{width:100%;display:block;margin:auto}img[_ngcontent-lbd-c31] + em[_ngcontent-lbd-c31]{display:block;word-break:break-all;text-align:center}img[_ngcontent-lbd-c31] + em[_ngcontent-lbd-c31], img[_ngcontent-lbd-c31] + em[_ngcontent-lbd-c31] > *[_ngcontent-lbd-c31]{font-size:.9rem;color:grey}pre[_ngcontent-lbd-c31]{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}code[_ngcontent-lbd-c31]{background-color:#000;color:#fff;padding:10px;display:block;white-space:break-spaces;word-break:break-word}.blog-title[_ngcontent-lbd-c31]{font-weight:400;font-size:4.5rem;line-height:1;word-break:normal;display:block;margin:0 auto 10px;text-align:center;font-family:Zilla Slab,serif}@media (max-width:768px){.blog-title[_ngcontent-lbd-c31]{font-size:3rem}}hr[_ngcontent-lbd-c31]{width:100px}.sub-items-container[_ngcontent-lbd-c31], mat-chip-list[_ngcontent-lbd-c31]{display:flex;justify-content:center}mat-chip-list[_ngcontent-lbd-c31]{margin:50px auto 5px}.keywords[_ngcontent-lbd-c31]{background-color:#f5f5f5;padding:10px;border:1px solid grey}</style><meta name="title" content="Embedding Power BI in Angular — Part 2"><meta name="description" content="Power BI can be embedded for the users of your organization who have access to it. This requires the users to sign-in to their Power BI account to view their content, which are the reports they own or the ones that have been shared with them. This is the second part of the two-part article series."><meta name="og:type" content="website"><meta name="og:url" content="/blog/embedding-powerbi-in-angular-part-2"><meta name="og:title" content="Embedding Power BI in Angular — Part 2"><meta name="og:description" content="Power BI can be embedded for the users of your organization who have access to it. This requires the users to sign-in to their Power BI account to view their content, which are the reports they own or the ones that have been shared with them. This is the second part of the two-part article series."><meta name="og:image" content=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="/blog/embedding-powerbi-in-angular-part-2"><meta name="twitter:title" content="Embedding Power BI in Angular — Part 2"><meta name="twitter:description" content="Power BI can be embedded for the users of your organization who have access to it. This requires the users to sign-in to their Power BI account to view their content, which are the reports they own or the ones that have been shared with them. This is the second part of the two-part article series."><meta name="twitter:image" content=""><meta name="twitter:site" content="@krishnaanaril"><meta name="twitter:creator" content="@krishnaanaril"><meta name="keywords" content="powerbi, angular"><style>.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}
</style><style>
      :host {
        display: none;
      }
      scully-content {
        display: none;
      }
    </style><script>window['ScullyIO']='generated';</script></head>

<body scully-version="0.0.86">
  <app-root _nghost-lbd-c15="" ng-version="9.1.0"><mat-toolbar _ngcontent-lbd-c15="" class="mat-toolbar tool-bar mat-toolbar-single-row"><nav _ngcontent-lbd-c15=""><ul _ngcontent-lbd-c15="" class="top-nav"><li _ngcontent-lbd-c15="" routerlink="/" routerlinkactive="nav-active" tabindex="0">Home</li><li _ngcontent-lbd-c15="">Blog</li><li _ngcontent-lbd-c15="">Projects</li><li _ngcontent-lbd-c15="">About</li></ul></nav></mat-toolbar><router-outlet _ngcontent-lbd-c15=""></router-outlet><app-blog _nghost-lbd-c31=""><div _ngcontent-lbd-c31="" class="blog-post">
    <div _ngcontent-lbd-c31="" class="title-section">
        <mat-chip-list _ngcontent-lbd-c31="" aria-label="Blog tags/keywords" class="mat-chip-list" id="mat-chip-list-0" tabindex="0" aria-required="false" aria-disabled="false" aria-invalid="false" aria-multiselectable="false" role="listbox" aria-orientation="horizontal"><div class="mat-chip-list-wrapper">
            <mat-chip _ngcontent-lbd-c31="" role="option" color="primary" class="mat-chip mat-focus-indicator keywords mat-primary mat-standard-chip" tabindex="-1" aria-disabled="false"><div class="mat-chip-ripple"></div>powerbi</mat-chip><mat-chip _ngcontent-lbd-c31="" role="option" color="primary" class="mat-chip mat-focus-indicator keywords mat-primary mat-standard-chip" tabindex="-1" aria-disabled="false"><div class="mat-chip-ripple"></div>angular</mat-chip><!---->
        </div></mat-chip-list>
        <h1 _ngcontent-lbd-c31="" class="blog-title">Embedding Power BI in Angular — Part 2</h1>
        <div _ngcontent-lbd-c31="" class="sub-items-container">
            <time _ngcontent-lbd-c31="">Oct 15, 2018</time>
        </div>
    </div>
    <hr _ngcontent-lbd-c31="">
    <!--scullyContent-begin--><p _ngcontent-lbd-c31="">Power BI can be embedded for the users of your organization who have access to it. This requires the users to sign-in to their Power BI account to view their content, which are the reports they own or the ones that have been shared with them.</p>
<p _ngcontent-lbd-c31="">This is the second part of the two-part article series. You can find the first one <a href="https://krishnamohan.dev/blog/embedding-power-bi-in-angular-part-1" _ngcontent-lbd-c31="">here</a>.</p>
<h2 id="embedding-for-your-organization" _ngcontent-lbd-c31="">Embedding for your organization</h2>
<p _ngcontent-lbd-c31="">Creating dashboards/reports using Power BI are out of scope of this article, you can learn more about it <a href="https://docs.microsoft.com/en-us/power-bi/service-get-started" _ngcontent-lbd-c31="">here</a>. I’ve skipped a lot a details which have better documentation elsewhere.</p>
<h3 id="contents" _ngcontent-lbd-c31="">Contents</h3>
<ul _ngcontent-lbd-c31="">
<li _ngcontent-lbd-c31="">Prerequisite</li>
<li _ngcontent-lbd-c31="">Overview</li>
<li _ngcontent-lbd-c31="">Set up your embedded analytics development environment</li>
<li _ngcontent-lbd-c31="">Set up your Power BI environment</li>
<li _ngcontent-lbd-c31="">Create Angular client</li>
<li _ngcontent-lbd-c31="">Conclusion</li>
</ul>
<h3 id="prerequisites" _ngcontent-lbd-c31="">Prerequisites</h3>
<ul _ngcontent-lbd-c31="">
<li _ngcontent-lbd-c31=""><a href="https://powerbi.microsoft.com/en-us/pricing/" _ngcontent-lbd-c31="">Power BI pro account</a></li>
<li _ngcontent-lbd-c31=""><a href="https://azure.microsoft.com/en-us/free/" _ngcontent-lbd-c31="">Microsoft Azure Subscription</a></li>
<li _ngcontent-lbd-c31=""><a href="https://docs.microsoft.com/en-us/power-bi/developer/create-an-azure-active-directory-tenant" _ngcontent-lbd-c31="">Azure Active Directory Tenant</a> Setup. If it is already done for your organization, you can find it <a href="https://www.whatismytenantid.com/" _ngcontent-lbd-c31="">here</a>.</li>
<li _ngcontent-lbd-c31="">Visual Studio Code</li>
<li _ngcontent-lbd-c31="">npm, node, angular-cli</li>
</ul>
<h3 id="overview" _ngcontent-lbd-c31="">Overview</h3>
<p _ngcontent-lbd-c31="">A high level diagram showing how this works is shown below.</p>
<p _ngcontent-lbd-c31=""><img src="assets/images/02_01.png" alt="" _ngcontent-lbd-c31=""></p>
<p _ngcontent-lbd-c31="">The workflow is as follows.</p>
<ol _ngcontent-lbd-c31="">
<li _ngcontent-lbd-c31="">When user browses UI, he/she is asked to login with his/her power bi credentials.</li>
<li _ngcontent-lbd-c31="">User credentials are validated with Azure AD to generate access tokens.</li>
<li _ngcontent-lbd-c31="">UI calls Power BI API to get the report specific data with the token.</li>
<li _ngcontent-lbd-c31="">Power BI API returns report data, and UI displays it in the web page.</li>
</ol>
<h3 id="set-up-your-embedded-analytics-development-environment" _ngcontent-lbd-c31="">Set up your embedded analytics development environment</h3>
<p _ngcontent-lbd-c31="">Refer [this](<a href="http://When" _ngcontent-lbd-c31="">http://When</a> user browses UI, he/she is asked to login with his/her power bi credentials. User credentials are validated with Azure AD to generate access tokens UI calls Power BI API to get the report specific data with the token. Power BI API returns report data, and UI displays it in the web page.) for more details.</p>
<p _ngcontent-lbd-c31="">Here we need to do few more steps than what is mentioned in the documentation.</p>
<ol _ngcontent-lbd-c31="">
<li _ngcontent-lbd-c31="">Redirect URL should be the URL in the application that should be displayed post user authentication.</li>
<li _ngcontent-lbd-c31="">Set the key ‘oauth2AllowImplicitFlow’ in Azure Active Directory app manifest to true as we are using browser based clients.</li>
</ol>
<h3 id="set-up-your-power-bi-environment" _ngcontent-lbd-c31="">Set up your Power BI environment</h3>
<p _ngcontent-lbd-c31="">Read <a href="https://docs.microsoft.com/en-us/power-bi/developer/embed-sample-for-your-organization#set-up-your-power-bi-environment" _ngcontent-lbd-c31="">this</a> for more details.</p>
<h3 id="create-angular-client" _ngcontent-lbd-c31="">Create Angular client</h3>
<p _ngcontent-lbd-c31="">Our application should authenticate user to Azure Active Directory (AD) and generate the access token. This access token is used as the <a href="https://oauth.net/2/bearer-tokens/" _ngcontent-lbd-c31="">bearer </a>token for subsequent Power BI API requests.</p>
<p _ngcontent-lbd-c31="">For authenticating with Azure AD, we’ll be using <a href="https://github.com/AzureAD/azure-activedirectory-library-for-js" _ngcontent-lbd-c31="">this</a> library. You can add this to your angular project by running the following command.</p>
<pre _ngcontent-lbd-c31=""><code class="language-bash" _ngcontent-lbd-c31="">npm install adal-angular</code></pre>
<p _ngcontent-lbd-c31="">In the HTML page, create a ‘div’ with id ‘embedReport’. We’ll be showing report in this div. Embedding in div is done using Power BI JavaScript <a href="https://github.com/Microsoft/PowerBI-JavaScript" _ngcontent-lbd-c31="">library</a>. You can add it to your angular application by running the following command.</p>
<pre _ngcontent-lbd-c31=""><code class="language-bash" _ngcontent-lbd-c31="">npm install --save powerbi-client</code></pre>
<p _ngcontent-lbd-c31="">Now we’ve added the additional libraries for your requirement and can we start coding the the authentication service as follows.</p>
<p _ngcontent-lbd-c31=""><img src="assets/images/02_02.png" alt="" _ngcontent-lbd-c31="">
<em _ngcontent-lbd-c31="">Gist: <a href="https://gist.github.com/krishnaanaril/9a07c99efe7db86b8ede17d4177be303" _ngcontent-lbd-c31="">https://gist.github.com/krishnaanaril/9a07c99efe7db86b8ede17d4177be303</a></em></p>
<p _ngcontent-lbd-c31="">We can store ‘adal’ related configuration in the environment.ts file. I’ve attached the sample format below.</p>
<p _ngcontent-lbd-c31=""><img src="assets/images/02_03.png" alt="" _ngcontent-lbd-c31="">
<em _ngcontent-lbd-c31="">Gist: <a href="https://gist.github.com/krishnaanaril/b1b8798373a6bbe42e7f288ceb9ca1a9" _ngcontent-lbd-c31="">https://gist.github.com/krishnaanaril/b1b8798373a6bbe42e7f288ceb9ca1a9</a></em></p>
<p _ngcontent-lbd-c31="">Once the user is authenticated, to handle callback you need to add the following code in the redirect component’s ngOnInit method.</p>
<p _ngcontent-lbd-c31=""><img src="assets/images/02_04.png" alt="" _ngcontent-lbd-c31=""></p>
<p _ngcontent-lbd-c31="">Here I’ve written the code to embed the first of the available reports to a user. You can update it to suit your needs. First we need to get the access token and get the first of the available reports. The code is as follows.</p>
<p _ngcontent-lbd-c31=""><img src="assets/images/02_05.png" alt="" _ngcontent-lbd-c31="">
<em _ngcontent-lbd-c31="">Gist: <a href="https://gist.github.com/krishnaanaril/398f8e51136e649bf35e41baf8367efe" _ngcontent-lbd-c31="">https://gist.github.com/krishnaanaril/398f8e51136e649bf35e41baf8367efe</a></em></p>
<p _ngcontent-lbd-c31="">The method ‘getReportsInGroup’ will be invoking the corresponding Power BI REST API.</p>
<p _ngcontent-lbd-c31=""><img src="assets/images/02_06.png" alt="" _ngcontent-lbd-c31="">
<em _ngcontent-lbd-c31="">Gist: <a href="https://gist.github.com/krishnaanaril/427e4ef6b171fa109787617b3c0e6953" _ngcontent-lbd-c31="">https://gist.github.com/krishnaanaril/427e4ef6b171fa109787617b3c0e6953</a></em></p>
<p _ngcontent-lbd-c31="">Next, we need to embed the report in the HTML page. This is similar to ‘Embed for your customers’, except the token type which is ‘Aad’ and access token instead of embed token. Embedding report code is as follows.</p>
<p _ngcontent-lbd-c31=""><img src="assets/images/02_06.png" alt="Embedding report for your organization" _ngcontent-lbd-c31="">
<em _ngcontent-lbd-c31="">Embedding report for your organization</em></p>
<h3 id="conclusion" _ngcontent-lbd-c31="">Conclusion</h3>
<p _ngcontent-lbd-c31="">Now you’re done with your Angular app, run it and verify the reports. Dashboards and Tiles can be embedded in a similar way. You can find those snippets here.</p>
<ul _ngcontent-lbd-c31="">
<li _ngcontent-lbd-c31=""><a href="https://gist.github.com/krishnaanaril/1392403aa328684738e4ed6f0b8a664f" _ngcontent-lbd-c31="">Dashboard</a></li>
<li _ngcontent-lbd-c31=""><a href="https://gist.github.com/krishnaanaril/211f5b390a5e7e038b7a67dfe387fb29" _ngcontent-lbd-c31="">Tile</a></li>
</ul>
<!--scullyContent-end--><script>try {window['scullyContent'] = {cssId:"_ngcontent-lbd-c31",html:document.body.innerHTML.split('<!--scullyContent-begin-->')[1].split('<!--scullyContent-end-->')[0]};} catch(e) {console.error('scully could not parse content');}</script><scully-content _ngcontent-lbd-c31=""></scully-content>
    <hr _ngcontent-lbd-c31="">
    <div _ngcontent-lbd-c31="" class="post-footer">
        Have questions/comments? Tweet @<a _ngcontent-lbd-c31="" href="https://twitter.com/krishnaanaril">krishnaanaril</a>
    </div>
</div><!----></app-blog><!----></app-root>
  <noscript>Please enable JavaScript to continue using this application.</noscript>
<script id="ScullyIO-transfer-state"></script><script src="runtime-es2015.5424ff4013405309f617.js" type="module"></script><script src="runtime-es5.5424ff4013405309f617.js" nomodule="" defer=""></script><script src="polyfills-es5.705acb604763b7e3bf16.js" nomodule="" defer=""></script><script src="polyfills-es2015.0b9fb2a5444beb4a1f49.js" type="module"></script><script src="main-es2015.00ab923ac9e806336e7c.js" type="module"></script><script src="main-es5.00ab923ac9e806336e7c.js" nomodule="" defer=""></script>

</body></html>